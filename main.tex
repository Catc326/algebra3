\documentclass[a4paper, openany]{ctexbook}
\usepackage{zref-abspage}
\usepackage[margin=2.1cm]{geometry}

\usepackage{pifont}
\usepackage[perpage,symbol*]{footmisc}
\DefineFNsymbols{circled}{{\ding{192}}{\ding{193}}{\ding{194}}
{\ding{195}}{\ding{196}}{\ding{197}}{\ding{198}}{\ding{199}}{\ding{200}}{\ding{201}}}
\setfnsymbol{circled}

\usepackage{amsmath,amsfonts,mathrsfs,amssymb}
\usepackage{graphicx}

\usepackage[font=bf,labelfont=bf,labelsep=quad]{caption}

\usepackage{tikz}
\usetikzlibrary{decorations.pathmorphing, patterns}
\usetikzlibrary{calc, patterns, decorations.markings}
\usetikzlibrary{positioning, snakes, hobby}
\usetikzlibrary{decorations.pathreplacing}

\usepackage{ntheorem}
\theoremseparator{\;}

\usepackage{blkarray}
\usepackage{bm}
\usepackage[colorlinks=true, linkcolor=black]{hyperref}

% 数学环境设置
\theoremstyle{plain}
\theoremheaderfont{\normalfont\bfseries} 
\theorembodyfont{\normalfont}

\usepackage[framemethod=tikz]{mdframed}

% 定理类环境定义
\newtheorem{example}{\bf 例}[chapter]
\newenvironment{solution}{\noindent {\bf 解：}}{}
\newenvironment{analyze}{\noindent {\bf 分析：}}{}
\newenvironment{rmk}{\noindent {\bf 注意：}}{}
\newenvironment{note}{\noindent {\bf 评述：}}{}

% 数学符号重定义
\renewcommand{\emptyset}{\varnothing}
\renewcommand{\proofname}{\bf 证明：}
\newenvironment{proof}{{\noindent \bf 证明：}}{}

% 数学命令定义
\newcommand{\E}{\mathbb{E}}
\renewcommand{\Pr}{\mathbb{P}}
\newcommand{\EP}{\mathbb{E}^{\mathbb{P}}}
\newcommand{\EQ}{\mathbb{E}^{\mathbb{Q}}}
\newcommand{\dif}{\mathop{}\!\mathrm{d}}  % 改进的微分符号
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\Cov}{\mathrm{Cov}}
\newcommand{\x}{\times}
\renewcommand{\Longrightarrow}{\;\Rightarrow\;}
\newcommand{\map}[3]{#1:\; #2\mapsto #3}

% tcolorbox 设置
\usepackage{tcolorbox}
\tcbuselibrary{breakable, most}

% 定义各种框环境
\newtcolorbox{ex}[1][]{
  colback = white, 
  colframe = cyan!75!black, 
  fonttitle = \bfseries,
  colbacktitle = cyan!85!black, 
  enhanced,
  attach boxed title to top center = {yshift = -2mm},
  breakable, 
  title = 练习,
  #1
}

\newtcolorbox{blk}[1][]{
  colback = white, 
  colframe = magenta!75!black, 
  fonttitle = \bfseries,
  colbacktitle = magenta!85!black, 
  enhanced,
  attach boxed title to top left = {xshift = 5mm, yshift = -2mm},
  breakable, 
  title = 思考题,
  #1
}

\newtcolorbox{thm}[2][]{
  colback = white, 
  colframe = magenta!75!black, 
  fonttitle = \bfseries,
  colbacktitle = magenta!85!black, 
  enhanced,
  attach boxed title to top left = {xshift = 5mm, yshift = -2mm},
  breakable, 
  title = #2,
  #1
}

% 目录设置
\setcounter{tocdepth}{1}
\setcounter{secnumdepth}{2}

% 中文章节名称
\renewcommand{\contentsname}{目~~录}

% 数学符号定义
\newcommand{\poly}{\polynomial[reciprocal]}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}

\usepackage{mathtools}

% 图表间距调整
\setlength{\abovecaptionskip}{0.1cm}
\setlength{\belowcaptionskip}{0.1cm}

% 其他宏包
\usepackage{lscape}
\usepackage{yhmath}
\usepackage{longdivision}
\usepackage{polynom}
\usepackage{polynomial}
\usepackage{cancel}

% 分数和符号命令
\renewcommand{\frac}{\dfrac}
\newcommand{\oc}{$^{\circ}{\rm C}$}
\newcommand{\blank}{\underline{\qquad\qquad}}

\usepackage{multicol}
\usepackage{cases}
\usepackage{ulem}
\usepackage{enumerate}

% 微积分符号改进
\newcommand{\dd}{\mathop{}\!\mathrm{d}}

% 极限命令
\newcommand{\Lim}[2]{\lim\limits_{#1\rightarrow #2}}
\newcommand{\LIM}[1]{\lim\limits_{#1\rightarrow \infty}}

% 不等式符号重定义
\renewcommand{\ge}{\geqslant}
\renewcommand{\geq}{\geqslant}
\renewcommand{\le}{\leqslant}
\renewcommand{\leq}{\leqslant}

\usepackage{tkz-euclide}

\begin{document}

\title{\Huge\bfseries 北京四中高中教学讲义\\代数（第三册）}
\author{\Large 北京四中教学处~~编}
\date{\Large 1998年4月}

\maketitle

\frontmatter

\input{preface.tex}
\tableofcontents

\mainmatter
\setcounter{chapter}{7}

% 章节输入
\input{1.tex}
\input{2.tex}
\input{3.tex}
\input{4.tex}
\input{5.tex}

\backmatter

\end{document}